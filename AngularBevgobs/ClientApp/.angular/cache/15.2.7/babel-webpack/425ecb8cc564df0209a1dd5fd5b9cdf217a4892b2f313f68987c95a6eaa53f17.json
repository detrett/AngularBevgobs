{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../comment/comment.service\";\nimport * as i3 from \"../user/user.service\";\nimport * as i4 from \"src/app/services/authentication.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nconst _c0 = function (a0, a1, a2) {\n  return {\n    \"adminTitle\": a0,\n    \"modTitle\": a1,\n    \"memberTitle\": a2\n  };\n};\nfunction CommentComponent_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"a\", 53);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction3(2, _c0, (ctx_r0.author == null ? null : ctx_r0.author.Rank) === \"Admin\", (ctx_r0.author == null ? null : ctx_r0.author.Rank) === \"Mod\", (ctx_r0.author == null ? null : ctx_r0.author.Rank) !== \"Admin\" && (ctx_r0.author == null ? null : ctx_r0.author.Rank) !== \"Mod\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.author == null ? null : ctx_r0.author.Username, \" \");\n  }\n}\nfunction CommentComponent_img_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 54);\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"src\", \"data:image/png;base64,\" + (ctx_r1.author == null ? null : ctx_r1.author.UserPhoto), i0.ɵɵsanitizeUrl);\n  }\n}\nfunction CommentComponent_i_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"i\", 55);\n  }\n}\nfunction CommentComponent_ng_container_31_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"button\", 56);\n    i0.ɵɵelement(2, \"i\", 57);\n    i0.ɵɵtext(3, \" Edit \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"a\", 58);\n    i0.ɵɵelement(5, \"i\", 59);\n    i0.ɵɵtext(6, \" Delete \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction CommentComponent_ng_container_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, CommentComponent_ng_container_31_ng_container_1_Template, 7, 0, \"ng-container\", 4);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.isAuthorOrMod);\n  }\n}\nfunction CommentComponent_img_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 54);\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"src\", \"data:image/png;base64,\" + (ctx_r4.author == null ? null : ctx_r4.author.UserPhoto), i0.ɵɵsanitizeUrl);\n  }\n}\nfunction CommentComponent_i_36_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"i\", 60);\n  }\n}\nfunction CommentComponent_ng_container_39_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"a\", 61);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction3(2, _c0, (ctx_r6.author == null ? null : ctx_r6.author.Rank) === \"Admin\", (ctx_r6.author == null ? null : ctx_r6.author.Rank) === \"Mod\", (ctx_r6.author == null ? null : ctx_r6.author.Rank) !== \"Admin\" && (ctx_r6.author == null ? null : ctx_r6.author.Rank) !== \"Mod\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r6.author == null ? null : ctx_r6.author.Username, \" \");\n  }\n}\nexport class CommentComponent {\n  constructor(_router, _commentService, _userService, authService) {\n    this._router = _router;\n    this._commentService = _commentService;\n    this._userService = _userService;\n    this.authService = authService;\n    this.currentUser = null;\n  }\n  ngAfterViewInit() {\n    // Bootstrap tooltip initialization\n    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle=\"tooltip\"]'));\n    var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {\n      return new bootstrap.Tooltip(tooltipTriggerEl);\n    });\n  }\n  getAuthor() {\n    console.log(\"Comment Component: getAuthor()\");\n    if (this.comment?.UserId != null) {\n      this._userService.getUserById(this.comment?.UserId).subscribe(data => {\n        console.log('Data received: ', JSON.stringify(data));\n        this.author = data;\n      });\n    }\n  }\n  getFormattedDate() {\n    console.log(\"Comment Component: getFormattedDate()\");\n    console.log(\"Last comment ID: \" + this.comment?.CreatedAt);\n    if (!this.comment?.CreatedAt) {\n      return \"Undefined date\";\n    } else {\n      const createdDate = new Date(this.comment?.CreatedAt);\n      const now = new Date();\n      const ts = now.getTime() - createdDate.getTime();\n      const minutes = Math.floor(ts / 60000);\n      const hours = Math.floor(ts / 3600000);\n      const days = Math.floor(ts / (3600000 * 24));\n      if (minutes < 2) return '1 minute ago';\n      if (hours < 1) return `${minutes} minutes ago`;\n      if (days < 1) return hours >= 2 ? `${hours} hours ago` : '1 hour ago';\n      if (days < 2) return 'yesterday';\n      if (days < 5) return `on ${createdDate.getDay()}`;\n      return `on ${createdDate.toLocaleDateString('en-US', {\n        day: 'numeric',\n        month: 'long'\n      })}`;\n    }\n  }\n  get authorJoinDate() {\n    return this.author?.CreatedAt.toLocaleDateString('en-US', {\n      day: 'numeric',\n      month: 'long'\n    });\n  }\n  ngOnInit() {\n    console.log(\"Comment Component: ngOnInit()\");\n    this.getAuthor();\n  }\n  get isAuthenticated() {\n    return this.authService.isAuthenticated();\n  }\n  get isAuthorOrMod() {\n    if (this.author?.Rank == \"Admin\" || this.author?.Rank == \"Mod\" || this.currentUser == this.author?.Username) {\n      return true;\n    } else return false;\n  }\n  logout() {\n    this.authService.logout();\n  }\n}\nCommentComponent.ɵfac = function CommentComponent_Factory(t) {\n  return new (t || CommentComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.CommentService), i0.ɵɵdirectiveInject(i3.UserService), i0.ɵɵdirectiveInject(i4.AuthService));\n};\nCommentComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CommentComponent,\n  selectors: [[\"app-comment\"]],\n  inputs: {\n    comment: \"comment\"\n  },\n  decls: 90,\n  vars: 22,\n  consts: [[1, \"background-white\", \"card\", \"post-container\", 3, \"id\"], [1, \"row\"], [1, \"aside-post\", \"hidden-mobile\", \"col-md-2\"], [1, \"aside-user-style\", \"mb-4\"], [4, \"ngIf\"], [\"href\", \"#\", \"title\", \"Go to profile\", 1, \"aside-user-photo-container\"], [\"alt\", \"Profile Picture\", \"class\", \"img-avatar\", 3, \"src\", 4, \"ngIf\"], [\"class\", \"fa-regular fa-circle-user aside-user-photo\", 4, \"ngIf\"], [1, \"margin-bt-20\"], [1, \"aside-member-title\"], [1, \"aside-left-align\"], [1, \"aside-subtitle\"], [1, \"col-12\", \"col-md-10\", \"post-top\"], [1, \"dropdown-center\"], [\"href\", \"#\", \"role\", \"button\", \"data-bs-toggle\", \"dropdown\", \"aria-expanded\", \"false\"], [1, \"fa-solid\", \"fa-ellipsis\", \"ellipsis\"], [1, \"dropdown-menu\"], [\"href\", \"#\", \"data-bs-toggle\", \"modal\", \"data-bs-target\", \"#shareModal-\", \"data-bs-id\", \"\", 1, \"dropdown-item\"], [1, \"fa-solid\", \"fa-share-nodes\", \"padding-right-icon\"], [1, \"only-mobile\"], [1, \"post-top-user-photo-automargin\"], [\"href\", \"#\", \"title\", \"Go to profile\", 1, \"post-top-user-photo-container\"], [\"class\", \"fa-circle-user aside-user-photo\", 4, \"ngIf\"], [1, \"post-top-title\"], [\"title\", \"Jump to comment\", 1, \"post-top-subtitle\", 3, \"href\"], [\"title\", \"Jump to comment\", 3, \"href\"], [1, \"post-top-title\", \"hidden-mobile\"], [\"title\", \"Jump to comment\", 1, \"post-top-subtitle\", \"hidden-mobile\", 3, \"href\"], [\"method\", \"post\", 1, \"mb-3\"], [1, \"post-body\"], [\"contenteditable\", \"false\", 1, \"prevent-blur\", 3, \"id\"], [\"type\", \"hidden\", \"value\", \"\", 3, \"id\"], [1, \"text-danger\", \"m-2-5\"], [\"tabindex\", \"-1\", \"aria-labelledby\", \"shareModalLabel\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\", 3, \"id\"], [1, \"modal-dialog\", \"modal-dialog-centered\"], [1, \"modal-content\"], [1, \"modal-header\"], [\"id\", \"shareModalLabel\", 1, \"modal-title\", \"fs-5\", \"modal-font\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"btn-close\"], [1, \"modal-body\"], [1, \"modal-subtitle\"], [\"type\", \"text\", \"id\", \"comment-id\", \"value\", \"\", 1, \"share-input\"], [\"tabindex\", \"-1\", \"aria-labelledby\", \"deleteModalLabel\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\", 3, \"id\"], [1, \"modal-header\", \"fd-column\"], [1, \"circle-icon\"], [1, \"fa-solid\", \"fa-triangle-exclamation\", \"fa-2xl\"], [\"id\", \"deleteModalLabel\", 1, \"modal-title\", \"fs-5\", \"modal-font\"], [1, \"modal-body\", \"text-center\"], [1, \"modal-subtitle\", \"mt-2\"], [1, \"modal-subtitle\", \"mb-5\"], [\"method\", \"post\"], [\"type\", \"submit\", 1, \"mb-3\", \"std-pink-btn\", \"w-75\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"mb-4\", \"std-purple-btn\", \"w-75\"], [\"href\", \"#\", \"title\", \"Go to User Profile\", 3, \"ngClass\"], [\"alt\", \"Profile Picture\", 1, \"img-avatar\", 3, \"src\"], [1, \"fa-regular\", \"fa-circle-user\", \"aside-user-photo\"], [\"id\", \"editBtn-@Model.CommentId\", \"onclick\", \"edit(@Model.CommentId)\", 1, \"dropdown-item\"], [1, \"fa-solid\", \"fa-pen\", \"padding-right-icon\"], [\"href\", \"\", \"data-bs-toggle\", \"modal\", \"data-bs-target\", \"#deleteModal-@Model.CommentId\", \"data-bs-id\", \"@Model.CommentId\", 1, \"dropdown-item\"], [1, \"fa-solid\", \"fa-eraser\", \"padding-right-icon\"], [1, \"fa-circle-user\", \"aside-user-photo\"], [\"href\", \"#\", \"title\", \"Go to User Profile\", 1, \"user-link\", 3, \"ngClass\"]],\n  template: function CommentComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"article\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"h3\", 3);\n      i0.ɵɵtemplate(4, CommentComponent_ng_container_4_Template, 3, 6, \"ng-container\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"ul\")(6, \"li\")(7, \"a\", 5);\n      i0.ɵɵtemplate(8, CommentComponent_img_8_Template, 1, 1, \"img\", 6);\n      i0.ɵɵtemplate(9, CommentComponent_i_9_Template, 1, 0, \"i\", 7);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(10, \"li\", 8)(11, \"span\", 9);\n      i0.ɵɵtext(12);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(13, \"li\", 10)(14, \"span\", 11);\n      i0.ɵɵtext(15);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(16, \"li\", 10)(17, \"span\", 11);\n      i0.ɵɵtext(18, \"Joined: \");\n      i0.ɵɵelement(19, \"time\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(20, \"div\", 12)(21, \"div\")(22, \"div\", 13)(23, \"a\", 14);\n      i0.ɵɵelement(24, \"i\", 15);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(25, \"ul\", 16)(26, \"li\")(27, \"a\", 17);\n      i0.ɵɵelement(28, \"i\", 18);\n      i0.ɵɵtext(29, \" Share \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(30, \"li\");\n      i0.ɵɵtemplate(31, CommentComponent_ng_container_31_Template, 2, 1, \"ng-container\", 4);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(32, \"div\", 19)(33, \"div\", 20)(34, \"a\", 21);\n      i0.ɵɵtemplate(35, CommentComponent_img_35_Template, 1, 1, \"img\", 6);\n      i0.ɵɵtemplate(36, CommentComponent_i_36_Template, 1, 0, \"i\", 22);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(37, \"div\")(38, \"h4\", 23);\n      i0.ɵɵtemplate(39, CommentComponent_ng_container_39_Template, 3, 6, \"ng-container\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(40, \"a\", 24);\n      i0.ɵɵtext(41, \" Posted \");\n      i0.ɵɵelementStart(42, \"time\");\n      i0.ɵɵtext(43);\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(44, \"a\", 25)(45, \"h4\", 26);\n      i0.ɵɵtext(46);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(47, \"a\", 27);\n      i0.ɵɵtext(48, \" Posted \");\n      i0.ɵɵelementStart(49, \"time\");\n      i0.ɵɵtext(50);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(51, \"form\", 28)(52, \"div\", 29)(53, \"p\", 30);\n      i0.ɵɵtext(54);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(55, \"input\", 31)(56, \"span\", 32);\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵelementStart(57, \"div\", 33)(58, \"div\", 34)(59, \"div\", 35)(60, \"div\", 36)(61, \"h1\", 37);\n      i0.ɵɵtext(62, \"Share this post!\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(63, \"button\", 38);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(64, \"div\", 39)(65, \"h5\", 40);\n      i0.ɵɵtext(66, \"Link to this comment:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(67, \"input\", 41);\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(68, \"div\", 42)(69, \"div\", 34)(70, \"div\", 35)(71, \"div\", 43)(72, \"div\")(73, \"span\", 44);\n      i0.ɵɵelement(74, \"i\", 45);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(75, \"div\")(76, \"h1\", 46);\n      i0.ɵɵtext(77, \"Are you sure?\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(78, \"div\", 47)(79, \"h2\", 48);\n      i0.ɵɵtext(80, \"This action cannot be undone.\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(81, \"h3\", 49);\n      i0.ɵɵtext(82);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(83, \"div\")(84, \"form\", 50)(85, \"button\", 51);\n      i0.ɵɵtext(86, \"Delete\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(87, \"div\")(88, \"button\", 52);\n      i0.ɵɵtext(89, \"Cancel\");\n      i0.ɵɵelementEnd()()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵpropertyInterpolate1(\"id\", \"comment-\", ctx.comment == null ? null : ctx.comment.CommentId, \"\");\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.comment == null ? null : ctx.comment.UserId);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.author == null ? null : ctx.author.UserPhoto);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !(ctx.author == null ? null : ctx.author.UserPhoto));\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate(ctx.author == null ? null : ctx.author.Rank);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\"Posts: \", ctx.author == null ? null : ctx.author.UserComments == null ? null : ctx.author.UserComments.length, \"\");\n      i0.ɵɵadvance(16);\n      i0.ɵɵproperty(\"ngIf\", ctx.isAuthenticated);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.author == null ? null : ctx.author.UserPhoto);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !(ctx.author == null ? null : ctx.author.UserPhoto));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.comment == null ? null : ctx.comment.UserId);\n      i0.ɵɵadvance(1);\n      i0.ɵɵpropertyInterpolate1(\"href\", \"#comment-\", ctx.comment == null ? null : ctx.comment.CommentId, \"\", i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate(ctx.getFormattedDate());\n      i0.ɵɵadvance(1);\n      i0.ɵɵpropertyInterpolate1(\"href\", \"#comment\", ctx.comment == null ? null : ctx.comment.CommentId, \"-\", i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.comment == null ? null : ctx.comment.Title);\n      i0.ɵɵadvance(1);\n      i0.ɵɵpropertyInterpolate1(\"href\", \"#comment-\", ctx.comment == null ? null : ctx.comment.CommentId, \"\", i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate(ctx.getFormattedDate());\n      i0.ɵɵadvance(3);\n      i0.ɵɵpropertyInterpolate1(\"id\", \"comment-\", ctx.comment == null ? null : ctx.comment.CommentId, \"-body\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵtextInterpolate1(\" \", ctx.comment == null ? null : ctx.comment.Body, \" \");\n      i0.ɵɵadvance(1);\n      i0.ɵɵpropertyInterpolate1(\"id\", \"comment-\", ctx.comment == null ? null : ctx.comment.CommentId, \"-input\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵpropertyInterpolate1(\"id\", \"shareModal-\", ctx.comment == null ? null : ctx.comment.CommentId, \"\");\n      i0.ɵɵadvance(11);\n      i0.ɵɵpropertyInterpolate1(\"id\", \"deleteModal-\", ctx.comment == null ? null : ctx.comment.CommentId, \"\");\n      i0.ɵɵadvance(14);\n      i0.ɵɵtextInterpolate1(\"The content of your comment (Id #\", ctx.comment == null ? null : ctx.comment.CommentId, \") will be lost forever.\");\n    }\n  },\n  dependencies: [i5.NgClass, i5.NgIf, i6.ɵNgNoValidate, i6.NgControlStatusGroup, i6.NgForm],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;IASQA,6BAAsC;IACpCA,6BAKQ;IACNA,YACF;IAAAA,iBAAI;IACNA,0BAAe;;;;IAPVA,eAII;IAJJA,sTAII;IACLA,eACF;IADEA,sFACF;;;;;IAQEA,0BAA6H;;;;IAA9FA,2HAAoD;;;;;IAEnFA,wBAAqF;;;;;IA0CjFA,6BAAoC;IAClCA,kCAA6F;IAC3FA,wBAAkD;IAClDA,sBACF;IAAAA,iBAAS;IACTA,6BACgF;IAC9EA,wBAAqD;IACrDA,wBACF;IAAAA,iBAAI;IACNA,0BAAe;;;;;IAXjBA,6BAAsC;IACpCA,mGAUe;IACjBA,0BAAe;;;;IAXEA,eAAmB;IAAnBA,2CAAmB;;;;;IAqBpCA,0BAA6H;;;;IAA9FA,2HAAoD;;;;;IAEnFA,wBAA0E;;;;;IAM1EA,6BAAsC;IACpCA,6BAKQ;IACNA,YACF;IAAAA,iBAAI;IACNA,0BAAe;;;;IAPVA,eAII;IAJJA,sTAII;IACLA,eACF;IADEA,sFACF;;;AC3FhB,OAAM,MAAOC,gBAAgB;EAM3BC,YACUC,OAAe,EACfC,eAA+B,EAC/BC,YAAyB,EACzBC,WAAwB;IAHxB,YAAO,GAAPH,OAAO;IACP,oBAAe,GAAfC,eAAe;IACf,iBAAY,GAAZC,YAAY;IACZ,gBAAW,GAAXC,WAAW;IANrB,gBAAW,GAAQ,IAAI;EAMe;EAEtCC,eAAe;IACb;IACA,IAAIC,kBAAkB,GAAG,EAAE,CAACC,KAAK,CAACC,IAAI,CAACC,QAAQ,CAACC,gBAAgB,CAAC,4BAA4B,CAAC,CAAC;IAC/F,IAAIC,WAAW,GAAGL,kBAAkB,CAACM,GAAG,CAAC,UAAUC,gBAAgB;MACjE,OAAO,IAAIC,SAAS,CAACC,OAAO,CAACF,gBAAgB,CAAC;IAChD,CAAC,CAAC;EACJ;EAEAG,SAAS;IACPC,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC;IAE7C,IAAI,IAAI,CAACC,OAAO,EAAEC,MAAM,IAAI,IAAI,EAAE;MAChC,IAAI,CAACjB,YAAY,CAACkB,WAAW,CAAC,IAAI,CAACF,OAAO,EAAEC,MAAM,CAAC,CAChDE,SAAS,CAACC,IAAI,IAAG;QAChBN,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEM,IAAI,CAACC,SAAS,CAACF,IAAI,CAAC,CAAC;QACpD,IAAI,CAACG,MAAM,GAAGH,IAAI;MACpB,CAAC,CAAC;;EAER;EAEAI,gBAAgB;IAEdV,OAAO,CAACC,GAAG,CAAC,uCAAuC,CAAC;IACpDD,OAAO,CAACC,GAAG,CAAC,mBAAmB,GAAG,IAAI,CAACC,OAAO,EAAES,SAAS,CAAC;IAE1D,IAAI,CAAC,IAAI,CAACT,OAAO,EAAES,SAAS,EAAE;MAC5B,OAAO,gBAAgB;KACxB,MAAM;MACL,MAAMC,WAAW,GAAG,IAAIC,IAAI,CAAC,IAAI,CAACX,OAAO,EAAES,SAAS,CAAC;MAErD,MAAMG,GAAG,GAAG,IAAID,IAAI,EAAE;MACtB,MAAME,EAAE,GAAGD,GAAG,CAACE,OAAO,EAAE,GAAGJ,WAAW,CAACI,OAAO,EAAE;MAChD,MAAMC,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACJ,EAAE,GAAG,KAAK,CAAC;MACtC,MAAMK,KAAK,GAAGF,IAAI,CAACC,KAAK,CAACJ,EAAE,GAAG,OAAO,CAAC;MACtC,MAAMM,IAAI,GAAGH,IAAI,CAACC,KAAK,CAACJ,EAAE,IAAI,OAAO,GAAG,EAAE,CAAC,CAAC;MAE5C,IAAIE,OAAO,GAAG,CAAC,EAAE,OAAO,cAAc;MACtC,IAAIG,KAAK,GAAG,CAAC,EAAE,OAAO,GAAGH,OAAO,cAAc;MAC9C,IAAII,IAAI,GAAG,CAAC,EAAE,OAAOD,KAAK,IAAI,CAAC,GAAG,GAAGA,KAAK,YAAY,GAAG,YAAY;MACrE,IAAIC,IAAI,GAAG,CAAC,EAAE,OAAO,WAAW;MAChC,IAAIA,IAAI,GAAG,CAAC,EAAE,OAAO,MAAMT,WAAW,CAACU,MAAM,EAAE,EAAE;MACjD,OAAO,MAAMV,WAAW,CAACW,kBAAkB,CAAC,OAAO,EAAE;QAAEC,GAAG,EAAE,SAAS;QAAEC,KAAK,EAAE;MAAM,CAAE,CAAC,EAAE;;EAE7F;EAEA,IAAIC,cAAc;IAChB,OAAO,IAAI,CAACjB,MAAM,EAAEE,SAAS,CAACY,kBAAkB,CAAC,OAAO,EAAE;MAAEC,GAAG,EAAE,SAAS;MAAEC,KAAK,EAAE;IAAM,CAAE,CAAC;EAC9F;EAEAE,QAAQ;IACN3B,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC;IAE5C,IAAI,CAACF,SAAS,EAAE;EAClB;EAEA,IAAI6B,eAAe;IACjB,OAAO,IAAI,CAACzC,WAAW,CAACyC,eAAe,EAAE;EAC3C;EAEA,IAAIC,aAAa;IACf,IAAI,IAAI,CAACpB,MAAM,EAAEqB,IAAI,IAAI,OAAO,IAAI,IAAI,CAACrB,MAAM,EAAEqB,IAAI,IAAI,KAAK,IAAI,IAAI,CAACC,WAAW,IAAI,IAAI,CAACtB,MAAM,EAAEuB,QAAQ,EAAE;MAC3G,OAAO,IAAI;KACZ,MAAM,OAAO,KAAK;EACrB;EAEAC,MAAM;IACJ,IAAI,CAAC9C,WAAW,CAAC8C,MAAM,EAAE;EAC3B;;AA/EWnD,gBAAgB;mBAAhBA,gBAAgB;AAAA;AAAhBA,gBAAgB;QAAhBA,gBAAgB;EAAAoD;EAAAC;IAAAjC;EAAA;EAAAkC;EAAAC;EAAAC;EAAAC;IAAA;MDd7B1D,kCAA0F;MAQlFA,mFASe;MACjBA,iBAAK;MAELA,0BAAI;MAIEA,iEAA6H;MAE7HA,6DAAqF;MACvFA,iBAAI;MAGNA,8BAAyB;MACUA,aAAgB;MAAAA,iBAAO;MAE1DA,+BAA6B;MACEA,aAAuC;MAAAA,iBAAO;MAG7EA,+BAA6B;MACEA,yBAAQ;MAAAA,wBAAa;MAACA,iBAAO;MAOhEA,gCAAuC;MAM/BA,yBAA6C;MAC/CA,iBAAI;MAMJA,+BAA0B;MAIpBA,yBAA0D;MAC1DA,wBACF;MAAAA,iBAAI;MAENA,2BAAI;MACFA,qFAYe;MACjBA,iBAAK;MAITA,gCAAyB;MAKnBA,mEAA6H;MAE7HA,gEAA0E;MAC5EA,iBAAI;MAGNA,4BAAK;MAEDA,qFASe;MACjBA,iBAAK;MAELA,8BAA4F;MAC1FA,yBAAO;MAAAA,6BAAM;MAAAA,aAAsB;MAAAA,iBAAO;MAMhDA,8BAAkE;MACvBA,aAAkB;MAAAA,iBAAK;MAElEA,8BAA0G;MACxGA,yBAAO;MAAAA,6BAAM;MAAAA,aAAsB;MAAAA,iBAAO;MAK9CA,iCAAiC;MAG3BA,aACF;MAAAA,iBAAI;MACJA,6BAA0E;MAE5EA,iBAAM;MAoBdA,gCAAkI;MAI7DA,iCAAgB;MAAAA,iBAAK;MAClFA,8BAA4F;MAC9FA,iBAAM;MACNA,gCAAwB;MACKA,sCAAqB;MAAAA,iBAAK;MACrDA,6BAAgE;MAClEA,iBAAM;MAMZA,gCAAoI;MAMxHA,yBAAuD;MACzDA,iBAAO;MAGTA,4BAAK;MAC2DA,8BAAa;MAAAA,iBAAK;MAIpFA,gCAAoC;MACFA,8CAA6B;MAAAA,iBAAK;MAClEA,+BAAgC;MAAAA,aAA8E;MAAAA,iBAAK;MAGnHA,4BAAK;MAEoDA,uBAAM;MAAAA,iBAAS;MAGxEA,4BAAK;MAC+FA,uBAAM;MAAAA,iBAAS;;;MAlMrEA,mGAAmC;MAQlEA,eAAqB;MAArBA,sEAAqB;MAgB1BA,eAAuB;MAAvBA,uEAAuB;MAEzBA,eAAwB;MAAxBA,0EAAwB;MAKGA,eAAgB;MAAhBA,iEAAgB;MAGpBA,eAAuC;MAAvCA,yIAAuC;MAiCjDA,gBAAqB;MAArBA,0CAAqB;MAsB9BA,eAAuB;MAAvBA,uEAAuB;MAEzBA,eAAwB;MAAxBA,0EAAwB;MAMbA,eAAqB;MAArBA,sEAAqB;MAYnCA,eAAsC;MAAtCA,wHAAsC;MAC1BA,eAAsB;MAAtBA,4CAAsB;MAMtCA,eAAsC;MAAtCA,wHAAsC;MACEA,eAAkB;MAAlBA,oEAAkB;MAE1DA,eAAsC;MAAtCA,wHAAsC;MAC1BA,eAAsB;MAAtBA,4CAAsB;MAOhCA,eAAwC;MAAxCA,wGAAwC;MACzCA,eACF;MADEA,8EACF;MACOA,eAAyC;MAAzCA,yGAAyC;MAsBlCA,eAAsC;MAAtCA,sGAAsC;MAgBtCA,gBAAuC;MAAvCA,uGAAuC;MAiBvBA,gBAA8E;MAA9EA,yIAA8E","names":["i0","CommentComponent","constructor","_router","_commentService","_userService","authService","ngAfterViewInit","tooltipTriggerList","slice","call","document","querySelectorAll","tooltipList","map","tooltipTriggerEl","bootstrap","Tooltip","getAuthor","console","log","comment","UserId","getUserById","subscribe","data","JSON","stringify","author","getFormattedDate","CreatedAt","createdDate","Date","now","ts","getTime","minutes","Math","floor","hours","days","getDay","toLocaleDateString","day","month","authorJoinDate","ngOnInit","isAuthenticated","isAuthorOrMod","Rank","currentUser","Username","logout","selectors","inputs","decls","vars","consts","template"],"sourceRoot":"","sources":["D:\\VisualStudio\\source\\repos\\AngularBevgobs\\AngularBevgobs\\ClientApp\\src\\app\\comment\\comment.component.html","D:\\VisualStudio\\source\\repos\\AngularBevgobs\\AngularBevgobs\\ClientApp\\src\\app\\comment\\comment.component.ts"],"sourcesContent":["<!--Post start-->\r\n<article class=\"background-white card post-container\" id=\"comment-{{comment?.CommentId}}\">\r\n\r\n  <div class=\"row\">\r\n    <!--Side content (Author, image, info)-->\r\n    <div class=\"aside-post hidden-mobile col-md-2\">\r\n\r\n      <h3 class=\"aside-user-style mb-4\">\r\n        <!--Choosing class for color based on rank-->\r\n        <ng-container *ngIf=\"comment?.UserId\">\r\n          <a href=\"#\" title=\"Go to User Profile\"\r\n             [ngClass]=\"{\r\n              'adminTitle': author?.Rank === 'Admin',\r\n              'modTitle': author?.Rank === 'Mod',\r\n              'memberTitle': author?.Rank !== 'Admin' && author?.Rank !== 'Mod'\r\n               }\">\r\n            {{ author?.Username }}\r\n          </a>\r\n        </ng-container>\r\n      </h3>\r\n\r\n      <ul>\r\n        <li>\r\n          <a href=\"#\" class=\"aside-user-photo-container\" title=\"Go to profile\">\r\n            <!-- If user photo exists, display it -->\r\n            <img *ngIf=\"author?.UserPhoto\" [src]=\"'data:image/png;base64,' + author?.UserPhoto\" alt=\"Profile Picture\" class=\"img-avatar\">\r\n            <!-- Display default profile picture if no user photo exists -->\r\n            <i *ngIf=\"!author?.UserPhoto\" class=\"fa-regular fa-circle-user aside-user-photo\"></i>\r\n          </a>\r\n        </li>\r\n\r\n        <li class=\"margin-bt-20\">\r\n          <span class=\"aside-member-title\">{{author?.Rank}}</span>\r\n        </li>\r\n        <li class=\"aside-left-align\">\r\n          <span class=\"aside-subtitle\">Posts: {{author?.UserComments?.length}}</span>\r\n\r\n        </li>\r\n        <li class=\"aside-left-align\">\r\n          <span class=\"aside-subtitle\">Joined: <time></time> </span>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n    <!--End of side content-->\r\n\r\n    <!--Main Content-->\r\n    <div class=\"col-12 col-md-10 post-top\">\r\n      <!--Top of Post (Title, date, buttons)-->\r\n      <div>\r\n        <div class=\"dropdown-center\">\r\n          <!--Ellipsis-->\r\n          <a href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\r\n            <i class=\"fa-solid fa-ellipsis ellipsis\"></i>\r\n          </a>\r\n\r\n          <!--@{\r\n          var url = Model.ThreadId + \"#comment-\" + Model.CommentId;\r\n          }-->\r\n\r\n          <ul class=\"dropdown-menu\">\r\n            <li>\r\n              <a href=\"#\" class=\"dropdown-item\" data-bs-toggle=\"modal\"\r\n                 data-bs-target=\"#shareModal-\" data-bs-id=\"\">\r\n                <i class=\"fa-solid fa-share-nodes padding-right-icon\"></i>\r\n                Share\r\n              </a>\r\n            </li>\r\n            <li>\r\n              <ng-container *ngIf=\"isAuthenticated\">\r\n                <ng-container *ngIf=\"isAuthorOrMod\">\r\n                  <button class=\"dropdown-item\" id=\"editBtn-@Model.CommentId\" onclick=\"edit(@Model.CommentId)\">\r\n                    <i class=\"fa-solid fa-pen padding-right-icon\"></i>\r\n                    Edit\r\n                  </button>\r\n                  <a href=\"\" class=\"dropdown-item\" data-bs-toggle=\"modal\"\r\n                     data-bs-target=\"#deleteModal-@Model.CommentId\" data-bs-id=\"@Model.CommentId\">\r\n                    <i class=\"fa-solid fa-eraser padding-right-icon\"></i>\r\n                    Delete\r\n                  </a>\r\n                </ng-container>\r\n              </ng-container>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n        <!-- Only for mobile -->\r\n        <div class=\"only-mobile\">\r\n\r\n          <div class=\"post-top-user-photo-automargin\">\r\n            <a href=\"#\" class=\"post-top-user-photo-container\" title=\"Go to profile\">\r\n              <!-- If user photo exists, display it -->\r\n              <img *ngIf=\"author?.UserPhoto\" [src]=\"'data:image/png;base64,' + author?.UserPhoto\" alt=\"Profile Picture\" class=\"img-avatar\">\r\n              <!-- Display default profile picture if no user photo exists -->\r\n              <i *ngIf=\"!author?.UserPhoto\" class=\"fa-circle-user aside-user-photo\"></i>\r\n            </a>\r\n          </div>\r\n\r\n          <div>\r\n            <h4 class=\"post-top-title\">\r\n              <ng-container *ngIf=\"comment?.UserId\">\r\n                <a href=\"#\" title=\"Go to User Profile\" class=\"user-link\"\r\n                   [ngClass]=\"{\r\n                    'adminTitle': author?.Rank === 'Admin',\r\n                    'modTitle': author?.Rank === 'Mod',\r\n                    'memberTitle': author?.Rank !== 'Admin' && author?.Rank !== 'Mod'\r\n                     }\">\r\n                  {{ author?.Username }}\r\n                </a>\r\n              </ng-container>\r\n            </h4>\r\n\r\n            <a href=\"#comment-{{comment?.CommentId}}\" class=\"post-top-subtitle\" title=\"Jump to comment\">\r\n              Posted <time>{{getFormattedDate()}}</time>\r\n            </a>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- For regular display -->\r\n        <a href=\"#comment{{comment?.CommentId}}-\" title=\"Jump to comment\">\r\n          <h4 class=\"post-top-title hidden-mobile\">{{comment?.Title}}</h4>\r\n        </a>\r\n        <a href=\"#comment-{{comment?.CommentId}}\" class=\"post-top-subtitle hidden-mobile\" title=\"Jump to comment\">\r\n          Posted <time>{{getFormattedDate()}}</time>\r\n        </a>\r\n      </div>\r\n\r\n      <!--Body of Post-->\r\n      <form method=\"post\" class=\"mb-3\">\r\n        <div class=\"post-body\">\r\n          <p id=\"comment-{{comment?.CommentId}}-body\" contenteditable=\"false\" class=\"prevent-blur\">\r\n            {{comment?.Body}}\r\n          </p>\r\n          <input id=\"comment-{{comment?.CommentId}}-input\" type=\"hidden\" value=\"\" />\r\n          <span class=\"text-danger m-2-5\"></span>\r\n        </div>\r\n\r\n        <!--<button type=\"submit\" class=\"std-pink-btn mr-3 hidden\" id=\"save-comment-{{comment?.CommentId}}\">\r\n          Save changes\r\n        </button>\r\n\r\n        <button type=\"button\" class=\"std-purple-btn hidden\" id=\"cancel-save-{{comment?.CommentId}}\">\r\n          Cancel\r\n        </button>-->\r\n      </form>\r\n\r\n    </div>\r\n\r\n  </div>\r\n  <!--End of Main Content-->\r\n\r\n</article>\r\n<!--End of Post Content-->\r\n\r\n<!-- Sharing Modal -->\r\n<div class=\"modal fade\" id=\"shareModal-{{comment?.CommentId}}\" tabindex=\"-1\" aria-labelledby=\"shareModalLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-dialog-centered\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5 modal-font\" id=\"shareModalLabel\">Share this post!</h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n      </div>\r\n      <div class=\"modal-body\">\r\n        <h5 class=\"modal-subtitle\">Link to this comment:</h5>\r\n        <input type=\"text\" class=\"share-input\" id=\"comment-id\" value=\"\">\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Deleting Modal -->\r\n<div class=\"modal fade\" id=\"deleteModal-{{comment?.CommentId}}\" tabindex=\"-1\" aria-labelledby=\"deleteModalLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-dialog-centered\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header fd-column\">\r\n        <div>\r\n          <span class=\"circle-icon\">\r\n            <i class=\"fa-solid fa-triangle-exclamation fa-2xl\"></i>\r\n          </span>\r\n\r\n        </div>\r\n        <div>\r\n          <h1 class=\"modal-title fs-5 modal-font\" id=\"deleteModalLabel\">Are you sure?</h1>\r\n\r\n        </div>\r\n      </div>\r\n      <div class=\"modal-body text-center\">\r\n        <h2 class=\"modal-subtitle mt-2\">This action cannot be undone.</h2>\r\n        <h3 class=\"modal-subtitle mb-5\">The content of your comment (Id #{{comment?.CommentId}}) will be lost forever.</h3>\r\n\r\n\r\n        <div>\r\n          <form method=\"post\">\r\n            <button type=\"submit\" class=\"mb-3 std-pink-btn w-75\">Delete</button>\r\n          </form>\r\n        </div>\r\n        <div>\r\n          <button type=\"button\" class=\"mb-4 std-purple-btn w-75\" data-bs-dismiss=\"modal\" aria-label=\"Close\">Cancel</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit, Input, AfterViewInit } from '@angular/core';\r\nimport { IComment } from '../comment/comment';\r\nimport { IUser } from '../user/user';\r\nimport { Router } from '@angular/router';\r\nimport { CommentService } from '../comment/comment.service';\r\nimport { UserService } from '../user/user.service';\r\nimport { AuthService } from 'src/app/services/authentication.service';\r\ndeclare var bootstrap: any;\r\n\r\n@Component({\r\n  selector: 'app-comment',\r\n  templateUrl: './comment.component.html',\r\n  styleUrls: ['./comment.component.css']\r\n})\r\n\r\nexport class CommentComponent implements OnInit, AfterViewInit {\r\n  @Input() comment?: IComment;\r\n  author?: IUser;\r\n\r\n  currentUser: any = null;\r\n\r\n  constructor(\r\n    private _router: Router,\r\n    private _commentService: CommentService,\r\n    private _userService: UserService,\r\n    private authService: AuthService) { }\r\n\r\n  ngAfterViewInit(): void {\r\n    // Bootstrap tooltip initialization\r\n    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle=\"tooltip\"]'))\r\n    var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {\r\n      return new bootstrap.Tooltip(tooltipTriggerEl)\r\n    })\r\n  }\r\n\r\n  getAuthor(): void {\r\n    console.log(\"Comment Component: getAuthor()\");\r\n\r\n    if (this.comment?.UserId != null) {\r\n      this._userService.getUserById(this.comment?.UserId)\r\n        .subscribe(data => {\r\n          console.log('Data received: ', JSON.stringify(data));\r\n          this.author = data;\r\n        })\r\n    }\r\n  }\r\n\r\n  getFormattedDate(): string {\r\n\r\n    console.log(\"Comment Component: getFormattedDate()\");\r\n    console.log(\"Last comment ID: \" + this.comment?.CreatedAt);\r\n\r\n    if (!this.comment?.CreatedAt) {\r\n      return \"Undefined date\"\r\n    } else {\r\n      const createdDate = new Date(this.comment?.CreatedAt);\r\n\r\n      const now = new Date();\r\n      const ts = now.getTime() - createdDate.getTime();\r\n      const minutes = Math.floor(ts / 60000);\r\n      const hours = Math.floor(ts / 3600000);\r\n      const days = Math.floor(ts / (3600000 * 24));\r\n\r\n      if (minutes < 2) return '1 minute ago';\r\n      if (hours < 1) return `${minutes} minutes ago`;\r\n      if (days < 1) return hours >= 2 ? `${hours} hours ago` : '1 hour ago';\r\n      if (days < 2) return 'yesterday';\r\n      if (days < 5) return `on ${createdDate.getDay()}`;\r\n      return `on ${createdDate.toLocaleDateString('en-US', { day: 'numeric', month: 'long' })}`;\r\n    }\r\n  }\r\n\r\n  get authorJoinDate() {\r\n    return this.author?.CreatedAt.toLocaleDateString('en-US', { day: 'numeric', month: 'long' });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    console.log(\"Comment Component: ngOnInit()\");\r\n\r\n    this.getAuthor();\r\n  }\r\n\r\n  get isAuthenticated(): boolean {\r\n    return this.authService.isAuthenticated();\r\n  }\r\n\r\n  get isAuthorOrMod(): boolean {\r\n    if (this.author?.Rank == \"Admin\" || this.author?.Rank == \"Mod\" || this.currentUser == this.author?.Username) {\r\n      return true;\r\n    } else return false;\r\n  }\r\n\r\n  logout() {\r\n    this.authService.logout();\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}