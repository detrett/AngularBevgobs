{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, Input } from '@angular/core';\nlet SubforumComponent = class SubforumComponent {\n  constructor(_router, _subforumService) {\n    this._router = _router;\n    this._subforumService = _subforumService;\n    this.isLast = false;\n  }\n  findLastComment() {\n    console.log(\"Subforum Component: findLastComment()\");\n    this.subforum?.Threads.forEach(thread => {\n      if (thread.Comments && thread.Comments.length > 0) {\n        let tempLastComment = thread.Comments[thread.Comments.length - 1];\n        if (tempLastComment) {\n          if (!this.lastComment || this.lastComment.CreatedAt > tempLastComment.CreatedAt) {\n            this.lastComment = tempLastComment;\n          }\n        }\n      }\n    });\n    console.log(\"Last comment ID: \" + this.lastComment?.CommentId);\n  }\n  getFormattedDate() {\n    console.log(\"Subforum Component: getFormattedDate()\");\n    console.log(\"Last comment ID: \" + this.lastComment?.CreatedAt);\n    if (!this.lastComment?.CreatedAt) {\n      return \"Undefined date\";\n    } else {\n      const createdDate = new Date(this.lastComment.CreatedAt);\n      const now = new Date();\n      const ts = now.getTime() - createdDate.getTime();\n      const minutes = Math.floor(ts / 60000);\n      const hours = Math.floor(ts / 3600000);\n      const days = Math.floor(ts / (3600000 * 24));\n      if (minutes < 2) return '1 minute ago';\n      if (hours < 1) return `${minutes} minutes ago`;\n      if (days < 1) return hours >= 2 ? `${hours} hours ago` : '1 hour ago';\n      if (days < 2) return 'yesterday';\n      if (days < 5) return `on ${createdDate.getDay()}`;\n      return `on ${createdDate.toLocaleDateString()}`;\n    }\n  }\n  ngOnInit() {\n    console.log(\"Subforum Component: ngOnInit()\");\n    console.log(\"Subforum Name: \" + this.subforum?.Name);\n    this.findLastComment();\n  }\n};\n__decorate([Input()], SubforumComponent.prototype, \"subforum\", void 0);\n__decorate([Input()], SubforumComponent.prototype, \"isLast\", void 0);\nSubforumComponent = __decorate([Component({\n  selector: 'app-subforum',\n  templateUrl: './subforum.component.html',\n  styleUrls: ['./subforum.component.css']\n})], SubforumComponent);\nexport { SubforumComponent };","map":{"version":3,"mappings":"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","names":["Component","Input","SubforumComponent","constructor","_router","_subforumService","findLastComment","console","log","subforum","Threads","forEach","thread","Comments","length","tempLastComment","lastComment","CreatedAt","CommentId","getFormattedDate","createdDate","Date","now","ts","getTime","minutes","Math","floor","hours","days","getDay","toLocaleDateString","ngOnInit","Name","__decorate","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["D:\\VisualStudio\\source\\repos\\AngularBevgobs\\AngularBevgobs\\ClientApp\\src\\app\\subforum\\subforum.component.ts"],"sourcesContent":["import { Component, OnInit, Input } from '@angular/core';\r\nimport { ISubforum } from './subforum';\r\nimport { IComment } from '../comment/comment';\r\nimport { Router } from '@angular/router';\r\nimport { SubforumService } from './subforum.service';\r\n\r\n@Component({\r\n  selector: 'app-subforum',\r\n  templateUrl: './subforum.component.html',\r\n  styleUrls: ['./subforum.component.css']\r\n})\r\n\r\nexport class SubforumComponent implements OnInit {\r\n  @Input() subforum?: ISubforum;\r\n  @Input() isLast?: boolean = false;\r\n  lastComment?: IComment;\r\n\r\n  constructor(\r\n    private _router: Router,\r\n    private _subforumService: SubforumService) { }\r\n\r\n  findLastComment(): void {\r\n    console.log(\"Subforum Component: findLastComment()\");\r\n    this.subforum?.Threads.forEach(thread => {\r\n      if (thread.Comments && thread.Comments.length > 0) {\r\n        let tempLastComment = thread.Comments[thread.Comments.length - 1];\r\n\r\n        if (tempLastComment) {\r\n          if (!this.lastComment || this.lastComment.CreatedAt > tempLastComment.CreatedAt) {\r\n            this.lastComment = tempLastComment;\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    console.log(\"Last comment ID: \" + this.lastComment?.CommentId);\r\n  }\r\n\r\n  getFormattedDate(): string {\r\n\r\n    console.log(\"Subforum Component: getFormattedDate()\");\r\n    console.log(\"Last comment ID: \" + this.lastComment?.CreatedAt);\r\n\r\n    if (!this.lastComment?.CreatedAt) {\r\n      return \"Undefined date\"\r\n    } else {\r\n      const createdDate = new Date(this.lastComment.CreatedAt);\r\n      \r\n      const now = new Date();\r\n      const ts = now.getTime() - createdDate.getTime();\r\n      const minutes = Math.floor(ts / 60000);\r\n      const hours = Math.floor(ts / 3600000);\r\n      const days = Math.floor(ts / (3600000 * 24));\r\n\r\n      if (minutes < 2) return '1 minute ago';\r\n      if (hours < 1) return `${minutes} minutes ago`;\r\n      if (days < 1) return hours >= 2 ? `${hours} hours ago` : '1 hour ago';\r\n      if (days < 2) return 'yesterday';\r\n      if (days < 5) return `on ${createdDate.getDay()}`;\r\n      return `on ${createdDate.toLocaleDateString()}`;\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    console.log(\"Subforum Component: ngOnInit()\");\r\n    console.log(\"Subforum Name: \" + this.subforum?.Name);\r\n\r\n    this.findLastComment();\r\n  }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}