{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, Input } from '@angular/core';\nlet SubforumComponent = class SubforumComponent {\n  constructor(_router, _subforumService) {\n    this._router = _router;\n    this._subforumService = _subforumService;\n  }\n  findLastComment() {\n    console.log(\"Subforum Component: findLastComment()\");\n    this.subforum?.Threads.forEach(thread => {\n      if (thread.Comments && thread.Comments.length > 0) {\n        let tempLastComment = thread.Comments[thread.Comments.length - 1];\n        if (tempLastComment) {\n          if (!this.lastComment || this.lastComment.CreatedAt > tempLastComment.CreatedAt) {\n            this.lastComment = tempLastComment;\n          }\n        }\n      }\n    });\n  }\n  getFormattedDate(commentDate) {\n    const now = new Date();\n    const ts = now.getTime() - new Date(commentDate).getTime();\n    const minutes = Math.floor(ts / 60000);\n    const hours = Math.floor(ts / 3600000);\n    const days = Math.floor(ts / (3600000 * 24));\n    if (minutes < 2) return '1 minute ago';\n    if (hours < 1) return `${minutes} minutes ago`;\n    if (days < 1) return hours >= 2 ? `${hours} hours ago` : '1 hour ago';\n    if (days < 2) return 'yesterday';\n    if (days < 5) return `on ${commentDate.getDay()}`;\n    return `on ${commentDate.toLocaleDateString()}`;\n  }\n  ngOnInit() {\n    console.log(\"Subforum Component: ngOnInit()\");\n    console.log(\"Subforum Name: \" + this.subforum?.Name);\n    this.findLastComment();\n  }\n};\n__decorate([Input()], SubforumComponent.prototype, \"subforum\", void 0);\nSubforumComponent = __decorate([Component({\n  selector: 'app-subforum',\n  templateUrl: './subforum.component.html',\n  styleUrls: ['./subforum.component.css']\n})], SubforumComponent);\nexport { SubforumComponent };","map":{"version":3,"mappings":";AAAA,SAASA,SAAS,EAAUC,KAAK,QAAQ,eAAe;AAYjD,IAAMC,iBAAiB,GAAvB,MAAMA,iBAAiB;EAI5BC,YACUC,OAAe,EACfC,gBAAiC;IADjC,YAAO,GAAPD,OAAO;IACP,qBAAgB,GAAhBC,gBAAgB;EAAqB;EAE/CC,eAAe;IACbC,OAAO,CAACC,GAAG,CAAC,uCAAuC,CAAC;IACpD,IAAI,CAACC,QAAQ,EAAEC,OAAO,CAACC,OAAO,CAACC,MAAM,IAAG;MACtC,IAAIA,MAAM,CAACC,QAAQ,IAAID,MAAM,CAACC,QAAQ,CAACC,MAAM,GAAG,CAAC,EAAE;QACjD,IAAIC,eAAe,GAAGH,MAAM,CAACC,QAAQ,CAACD,MAAM,CAACC,QAAQ,CAACC,MAAM,GAAG,CAAC,CAAC;QAEjE,IAAIC,eAAe,EAAE;UACnB,IAAI,CAAC,IAAI,CAACC,WAAW,IAAI,IAAI,CAACA,WAAW,CAACC,SAAS,GAAGF,eAAe,CAACE,SAAS,EAAE;YAC/E,IAAI,CAACD,WAAW,GAAGD,eAAe;;;;IAI1C,CAAC,CAAC;EACJ;EAEAG,gBAAgB,CAACC,WAAiB;IAChC,MAAMC,GAAG,GAAG,IAAIC,IAAI,EAAE;IACtB,MAAMC,EAAE,GAAGF,GAAG,CAACG,OAAO,EAAE,GAAG,IAAIF,IAAI,CAACF,WAAW,CAAC,CAACI,OAAO,EAAE;IAC1D,MAAMC,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACJ,EAAE,GAAG,KAAK,CAAC;IACtC,MAAMK,KAAK,GAAGF,IAAI,CAACC,KAAK,CAACJ,EAAE,GAAG,OAAO,CAAC;IACtC,MAAMM,IAAI,GAAGH,IAAI,CAACC,KAAK,CAACJ,EAAE,IAAI,OAAO,GAAG,EAAE,CAAC,CAAC;IAE5C,IAAIE,OAAO,GAAG,CAAC,EAAE,OAAO,cAAc;IACtC,IAAIG,KAAK,GAAG,CAAC,EAAE,OAAO,GAAGH,OAAO,cAAc;IAC9C,IAAII,IAAI,GAAG,CAAC,EAAE,OAAOD,KAAK,IAAI,CAAC,GAAG,GAAGA,KAAK,YAAY,GAAG,YAAY;IACrE,IAAIC,IAAI,GAAG,CAAC,EAAE,OAAO,WAAW;IAChC,IAAIA,IAAI,GAAG,CAAC,EAAE,OAAO,MAAMT,WAAW,CAACU,MAAM,EAAE,EAAE;IACjD,OAAO,MAAMV,WAAW,CAACW,kBAAkB,EAAE,EAAE;EACjD;EAEAC,QAAQ;IACNxB,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC;IAC7CD,OAAO,CAACC,GAAG,CAAC,iBAAiB,GAAG,IAAI,CAACC,QAAQ,EAAEuB,IAAI,CAAC;IAEpD,IAAI,CAAC1B,eAAe,EAAE;EACxB;CACD;AA3CU2B,YAARhC,KAAK,EAAE,mDAAsB;AADnBC,iBAAiB,eAN7BF,SAAS,CAAC;EACTkC,QAAQ,EAAE,cAAc;EACxBC,WAAW,EAAE,2BAA2B;EACxCC,SAAS,EAAE,CAAC,0BAA0B;CACvC,CAAC,GAEWlC,iBAAiB,CA4C7B;SA5CYA,iBAAiB","names":["Component","Input","SubforumComponent","constructor","_router","_subforumService","findLastComment","console","log","subforum","Threads","forEach","thread","Comments","length","tempLastComment","lastComment","CreatedAt","getFormattedDate","commentDate","now","Date","ts","getTime","minutes","Math","floor","hours","days","getDay","toLocaleDateString","ngOnInit","Name","__decorate","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["D:\\VisualStudio\\source\\repos\\AngularBevgobs\\AngularBevgobs\\ClientApp\\src\\app\\subforum\\subforum.component.ts"],"sourcesContent":["import { Component, OnInit, Input } from '@angular/core';\r\nimport { ISubforum } from './subforum';\r\nimport { IComment } from '../comment/comment';\r\nimport { Router } from '@angular/router';\r\nimport { SubforumService } from './subforum.service';\r\n\r\n@Component({\r\n  selector: 'app-subforum',\r\n  templateUrl: './subforum.component.html',\r\n  styleUrls: ['./subforum.component.css']\r\n})\r\n\r\nexport class SubforumComponent implements OnInit {\r\n  @Input() subforum?: ISubforum;\r\n  lastComment?: IComment;\r\n\r\n  constructor(\r\n    private _router: Router,\r\n    private _subforumService: SubforumService) { }\r\n\r\n  findLastComment(): void {\r\n    console.log(\"Subforum Component: findLastComment()\");\r\n    this.subforum?.Threads.forEach(thread => {\r\n      if (thread.Comments && thread.Comments.length > 0) {\r\n        let tempLastComment = thread.Comments[thread.Comments.length - 1];\r\n\r\n        if (tempLastComment) {\r\n          if (!this.lastComment || this.lastComment.CreatedAt > tempLastComment.CreatedAt) {\r\n            this.lastComment = tempLastComment;\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  getFormattedDate(commentDate: Date): string {\r\n    const now = new Date();\r\n    const ts = now.getTime() - new Date(commentDate).getTime();\r\n    const minutes = Math.floor(ts / 60000);\r\n    const hours = Math.floor(ts / 3600000);\r\n    const days = Math.floor(ts / (3600000 * 24));\r\n\r\n    if (minutes < 2) return '1 minute ago';\r\n    if (hours < 1) return `${minutes} minutes ago`;\r\n    if (days < 1) return hours >= 2 ? `${hours} hours ago` : '1 hour ago';\r\n    if (days < 2) return 'yesterday';\r\n    if (days < 5) return `on ${commentDate.getDay()}`;\r\n    return `on ${commentDate.toLocaleDateString()}`;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    console.log(\"Subforum Component: ngOnInit()\");\r\n    console.log(\"Subforum Name: \" + this.subforum?.Name);\r\n\r\n    this.findLastComment();\r\n  }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}